(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{413:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(5155);s(2115);var r=s(6766),i=s(767);let n={default:"bg-surface border border-outline shadow-[var(--shadow-2)] hover:shadow-[var(--shadow-4)]",outlined:"bg-transparent border border-outline hover:bg-surface-variant/50",text:"bg-transparent border-0 hover:bg-surface-variant/30"},o=e=>{let{topSubHeading:t,heading:s,bottomSubHeading:o,description:l,imageUrl:c,icon:d,actionLabel:h,onActionClick:m,onClick:u,variant:x="default",priority:f=!1,className:p="",children:v}=e,b=!!u;return(0,a.jsxs)("div",{className:"\n        group relative flex flex-col overflow-hidden rounded-xl\n        transition-all duration-300 ease-out\n        ".concat(n[x],"\n        ").concat(b?"cursor-pointer":"","\n        ").concat(p,"\n      "),onClick:b?u:void 0,role:b?"button":void 0,tabIndex:b?0:void 0,onKeyDown:e=>{b&&("Enter"===e.key||" "===e.key)&&u()},children:[c&&(0,a.jsx)("div",{className:"relative aspect-video w-full overflow-hidden bg-surface-variant",children:(0,a.jsx)(r.default,{src:c,alt:s,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",priority:f})}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[d&&(0,a.jsx)("div",{className:"text-primary",children:d}),t&&(0,a.jsx)("p",{className:"text-sm font-medium text-on-surface-variant",children:t})]}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-on-surface mb-2",children:s}),l&&(0,a.jsx)("p",{className:"text-sm text-on-surface-variant flex-1 mb-4",children:l}),v&&(0,a.jsx)("div",{className:"mt-2",children:v}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[o&&(0,a.jsx)("p",{className:"text-sm text-on-surface-variant",children:o}),h&&m&&(0,a.jsx)(i.A,{variant:"text",size:"sm",onClick:e=>{e.stopPropagation(),m()},children:h})]})]})]})}},767:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(2115);let i={contained:"\n    bg-primary text-on-primary\n    shadow-[var(--shadow-2)]\n    hover:shadow-[var(--shadow-4)]\n    active:shadow-[var(--shadow-6)]\n    focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2\n  ",outlined:"\n    bg-transparent text-primary border border-outline\n    hover:bg-primary/8 focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2\n  ",text:"\n    bg-transparent text-primary\n    hover:bg-primary/8 focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:ring-offset-2\n  "},n={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-6 py-2.5 text-base gap-2",lg:"px-8 py-3 text-lg gap-2.5"},o=(0,r.forwardRef)((e,t)=>{let{children:s,variant:r="contained",size:o="md",className:l="",type:c="button",disabled:d=!1,loading:h=!1,icon:m,iconPosition:u="left",onClick:x,...f}=e;return(0,a.jsxs)("button",{ref:t,type:c,onClick:x,disabled:d||h,className:"\n          relative inline-flex items-center justify-center\n          font-medium rounded-md\n          transition-all duration-200 ease-out\n          overflow-hidden\n          \n          /* Ripple effect container */\n          before:absolute before:inset-0 before:bg-current before:opacity-0\n          active:before:opacity-[0.12] active:before:animate-ripple\n          \n          ".concat(i[r]," \n          ").concat(n[o]," \n          ").concat(d||h?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          ").concat(l,"\n        "),style:{color:"contained"===r?"var(--on-primary)":"var(--primary)"},...f,children:[m&&"left"===u&&!h&&(0,a.jsx)("span",{className:"transition-transform duration-200 group-hover:scale-110",children:m}),(0,a.jsx)("span",{className:"relative z-10 flex items-center gap-2",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]}):s}),m&&"right"===u&&!h&&(0,a.jsx)("span",{className:"transition-transform duration-200 group-hover:scale-110",children:m})]})});o.displayName="Button";let l=o},1829:(e,t,s)=>{Promise.resolve().then(s.bind(s,6294))},6294:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),r=s(2115),i=s(5404);async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(0,i.xI)().currentUser;if(!s)throw Error("User is not authentcated");let a=await s.getIdToken(),r={...t.headers,Authorization:"Bearer ".concat(a),"Content-Type":"application/json"};return fetch(e,{...t,headers:r})}var o=s(767),l=s(413),c=s(1129);let d=(0,c.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),h=(0,c.A)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),m=(0,c.A)((0,a.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");var u=s(6874),x=s.n(u),f=s(5695);function p(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),p=(0,f.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=await n("/api/admin/blog");if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to fetch posts")}let s=await e.json();t(s)}catch(e){u(e instanceof Error?e.message:"An unknown error occurred")}finally{i(!1)}})()},[]);let v=async s=>{if(confirm("Are you sure you want to delete this post?"))try{if(!(await n("/api/admin/blog/".concat(s),{method:"DELETE"})).ok)throw Error("Failed to delete post");t(e.filter(e=>e.id!==s))}catch(e){u(e instanceof Error?e.message:"Failed to delete")}},b=async s=>{try{let a=await n("/api/admin/blog/".concat(s.id),{method:"PUT",body:JSON.stringify({isPublished:!s.isPublished})});if(!a.ok)throw Error("Failed to update post status");let r=await a.json();t(e.map(e=>e.id===s.id?r:e))}catch(e){u(e instanceof Error?e.message:"Failed to update status")}};return s?(0,a.jsxs)("div",{className:"flex justify-center items-center min-h-screen",children:[(0,a.jsxs)("svg",{className:"animate-spin h-8 w-8 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{className:"ml-2 text-on-surface",children:"Loading posts..."})]}):c?(0,a.jsxs)("div",{className:"flex justify-center items-center min-h-screen text-error",children:["Error: ",c]}):(0,a.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-display font-bold text-on-surface",children:"Manage Posts"}),(0,a.jsx)(x(),{href:"/admin/new",children:(0,a.jsx)(o.A,{variant:"contained",children:"Create New Post"})})]}),0===e.length?(0,a.jsx)("p",{className:"text-center text-on-surface-variant",children:"You haven't created any posts yet."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsx)(l.A,{variant:"default",heading:e.title,description:e.content.substring(0,150)+"...",bottomSubHeading:"Status: ".concat(e.isPublished?"Published":"Draft"),actionLabel:"Edit",onActionClick:()=>p.push("/admin/edit/".concat(e.id)),children:(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,a.jsx)(o.A,{variant:"text",size:"sm",onClick:()=>b(e),icon:e.isPublished?(0,a.jsx)(m,{}):(0,a.jsx)(h,{}),children:e.isPublished?"Unpublish":"Publish"}),(0,a.jsx)(o.A,{variant:"text",size:"sm",onClick:()=>v(e.id),icon:(0,a.jsx)(d,{}),children:"Delete"})]})},e.id))})]})})}}},e=>{e.O(0,[563,173,129,766,441,964,358],()=>e(e.s=1829)),_N_E=e.O()}]);